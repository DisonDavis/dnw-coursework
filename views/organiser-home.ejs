<%- include('partials/header') %>

<!-- Site Info Section -->
<div class="mb-4">
  <h1 class="mb-1"><%= settings.site_name %></h1>
  <p class="text-muted"><%= settings.site_description %></p>
</div>

<a href="/organiser/settings" class="btn btn-secondary mb-3">Site Settings</a>
<form action="/organiser/create" method="POST" class="d-inline">
  <button class="btn btn-primary mb-3">Create New Event</button>
</form>

<h3>Published Events</h3>
<table class="table table-bordered">
  <thead>
    <tr><th>Title</th><th>Date</th><th>Tickets</th><th>Actions</th></tr>
  </thead>
  <tbody>
    <% publishedEvents.forEach(event => { %>
      <tr>
        <td><%= event.title %></td>
        <td><%= event.date %></td>
        <td>Full: <%= event.full_qty || 0 %>, Concession: <%= event.conc_qty || 0 %></td>

        <td>
          <a href="/organiser/edit/<%= event.id %>" class="btn btn-sm btn-warning">Edit</a>
          <form action="/organiser/delete/<%= event.id %>" method="POST" style="display:inline">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>


<h3>Draft Events</h3>
<table class="table table-bordered">
  <thead>
    <tr><th>Title</th><th>Date</th><th>Tickets</th><th>Actions</th></tr>
  </thead>
  <tbody>
    <% draftEvents.forEach(event => { %>
      <tr>
        <td><%= event.title %></td>
        <td><%= event.date %></td>
        <td>Full: <%= event.full_qty || 0 %>, Concession: <%= event.conc_qty || 0 %></td>

        <td>
          <a href="/organiser/edit/<%= event.id %>" class="btn btn-sm btn-warning">Edit</a>
          <form action="/organiser/publish/<%= event.id %>" method="POST" class="d-inline">
            <button class="btn btn-sm btn-success">Publish</button>
          </form>
          <form action="/organiser/delete/<%= event.id %>" method="POST" class="d-inline">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
<%- include('partials/footer') %>